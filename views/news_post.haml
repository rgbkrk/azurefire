= haml :partial_post, :locals => { :post => @post }, :layout => false
%ul.comments
  - @post.comments.each do |c|
    %li
      = haml :partial_comment, :locals => { :comment => c }, :layout => false
  %li.new{ :class => logged_in? ? 'administrator' : nil }
    %form{ :method => 'post' }
      - unless logged_in?
        %p
          %input{ :type => 'text', :class => 'name', :name => 'name' }
      %p
        %textarea{ :name => 'body' }
      %p
        %input{ :type => 'submit', :value => 'Submit' }
        %input{ :type => 'submit', :value => 'Preview' }