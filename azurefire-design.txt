azurefire design

= outline

layout
 - header: QOTD
news/
 - last 5 blog posts [*]
 - each post has:
  - timestamp [*]
  - author [*]
   - author icons
  - title [*]
  - body [*]
  - tags [*]
   - tags are links to archive search
  - comment ct <= permalink
<post>/
  - GET view post ->
   - 404 if not found
   - post as above, with full comments
   - new comment form
   - live preview of Markdown rendering
   - next/previous links
  - POST add comment ->
   - 404 if not found
   - write haml to comment dir, filename == hash [..]
   - append data/comments/slug/index
archive/
 - list of most recent posts, ordered by date
 - query by boolean tag exp (modifies rss feed)
about/
 - for each author, hardcoded:
  - picture
  - bio
.rss
 - query by boolean tag exp

Future
 - highlight administrator comments
 - deploy to production via git push
 - deploy posts via git push
  - auto-checkout, rebake, report errors
 - local post preview

CSS work
 - style author/timestamp line
 - style tag list
 - author icon in left margin
 - more space between posts
 - doublecheck .markdown styling

= rake [*]
 - bake: [*]
  - read spec from root to get in/out dirs [*]
  - read all files with right ext [*]
   - format: "JSON \n\n body EOF" JSON keys override settings below [*]
   - author == username [*]
   - timestamp == file mod time [*]
   - title == filename [*]
   - slug == title slugged [*]
   - verify: [*]
    - json is well-formed [*]
    - json contains correct keys: no missing uninferred ones, no extra mistypes
    - slug doesn't collide with a route [*]
    - slug doesn't collide with an existing post
  - use haml template, write out to out dir [*]
   - data/posts/slug.html [*]
   - data/comments/slug/index << empty [*]
  - use all posts to build indices [*]
   - data/posts/frontpage.index << "slug" for top 5 timestamps [*]
   - data/posts/archive.index << "timestamp \t tag,tag \t author \t slug \t Title" for all posts [*]
